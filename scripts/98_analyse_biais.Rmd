---
title: "98_biais"
author: "Léa Bouchet"
date: "2024-04-04"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, 

```{r}
library(dplyr)
library(tidyr)
library(ggplot2)

# Sélection des colonnes pertinentes et renommage de la première colonne
operation_description_peche1 <- operation_description_peche %>%
  select(odp_ope_id, odp_mom_id, odp_conductivite, odp_tension, odp_intensite, odp_puissance) %>%
  rename(ope_id = odp_ope_id,
         matos = odp_mom_id)

# Jointure avec ope_selection et suppression des doublons
ope_selection1 <- ope_selection %>%
  left_join(operation_description_peche1) %>%
  distinct()

```



```{r, fig.height = 25, fig.width = 10}
library(dplyr)
library(ggplot2)

# Regroupement des colonnes de la pêche électrique en une seule colonne "peche_elec"
ope_selection1_long <- ope_selection1 %>%
  pivot_longer(cols = starts_with("odp_"), 
               names_to = "peche_elec",
               values_to = "valeur") %>% 
  select(-pro_libelle, 
         -ope_date,
         -pop_id) %>%
  na.omit() %>% 
  ungroup()

```

```{r}
library(ggthemes)
library(tidyverse)
library(aspe)
library(ggplot2)
library (khroma)
library(dplyr)
library(wesanderson)
library(zoo)
library(lemon)
library(trend)
library(ggh4x)
```


```{r, fig.height = 25, fig.width = 10}
graphique5 <- ope_selection1_long %>% 
  ggplot(aes(x= annee, 
             y =valeur,
             group = matos,
             color = matos)) + 
  geom_point() +
  geom_line() +
  facet_grid2(sta_id ~ peche_elec, 
              scales = "free", 
              independent = "y") +
  theme(strip.background = element_rect(color = "black", fill = "#faffff"),
        legend.position = "bottom",
        panel.background = element_rect(fill="#faf0e0"),
        panel.grid.major = element_line(color="lightgrey", size = 0.1),
        panel.grid.minor = element_line(color = "lightgrey"),
        axis.text.x = element_text(angle = 45)) +
  geom_vline(xintercept = 2015,
             linetype = "dotted",
             colour = "red")

print(graphique5)

```

